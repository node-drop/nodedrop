# Node Drop Environment Configuration

# Edition: "community" (self-hosted) or "cloud" (SaaS)
NODEDROP_EDITION=community

# Database
POSTGRES_PASSWORD=postgres
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/node_drop

# Database Connection Pooling (Production)
# Maximum connections in pool (default: 20 for production, 10 for development)
# DB_POOL_MAX=20
# Minimum connections to maintain (default: 5 for production, 2 for development)
# DB_POOL_MIN=5
# Idle connection timeout in milliseconds (default: 30000 for production, 10000 for development)
# DB_IDLE_TIMEOUT_MS=30000
# Connection acquisition timeout in milliseconds (default: 5000)
# DB_CONNECTION_TIMEOUT_MS=5000
# Recycle connections after N uses (production only, default: 7500)
# DB_MAX_USES=7500

# Database SSL/TLS Configuration (Production)
# Enable SSL for database connections (default: true in production, false in development)
# DB_SSL=true
# Reject unauthorized SSL certificates (default: true in production)
# DB_SSL_REJECT_UNAUTHORIZED=true
# Base64-encoded CA certificate for custom SSL verification
# DB_SSL_CA="base64-encoded-ca-certificate"
# Base64-encoded client certificate for mutual TLS
# DB_SSL_CERT="base64-encoded-client-certificate"
# Base64-encoded client key for mutual TLS
# DB_SSL_KEY="base64-encoded-client-key"

# Database Query Logging
# Enable query logging (default: true in development, false in production)
# DB_LOG_QUERIES=false
# Log connection pool events (development only)
# DB_LOG_CONNECTIONS=false

# Drizzle ORM Configuration
DRIZZLE_SCHEMA_PATH="./backend/src/db/schema"
DRIZZLE_MIGRATIONS_PATH="./backend/src/db/migrations"

# Drizzle Service Migration Flags (set to "true" to enable Drizzle for specific services)
# These allow gradual migration from Prisma to Drizzle without breaking existing code
USE_DRIZZLE_USER_SERVICE=false
USE_DRIZZLE_WORKSPACE_SERVICE=false
USE_DRIZZLE_TEAM_SERVICE=false
USE_DRIZZLE_WORKFLOW_SERVICE=false
USE_DRIZZLE_EXECUTION_SERVICE=false
USE_DRIZZLE_CREDENTIAL_SERVICE=false
USE_DRIZZLE_VARIABLE_SERVICE=false
USE_DRIZZLE_NODE_SERVICE=false
USE_DRIZZLE_TRIGGER_SERVICE=false
USE_DRIZZLE_WEBHOOK_SERVICE=false

# Redis
REDIS_URL=redis://localhost:6379

# Authentication
JWT_SECRET=your-super-secret-jwt-key-change-in-production
CREDENTIAL_ENCRYPTION_KEY=0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef

# Frontend
FRONTEND_URL=http://localhost:3000
VITE_API_URL=http://localhost:4000

# Server
PORT=4000
NODE_ENV=development

# Optional: For production deployment
# POSTGRES_PASSWORD=your-secure-production-password
# JWT_SECRET=your-production-jwt-secret
# CREDENTIAL_ENCRYPTION_KEY=your-production-encryption-key
# DB_POOL_MAX=20
# DB_POOL_MIN=5
# DB_SSL=true
# DB_SSL_REJECT_UNAUTHORIZED=true